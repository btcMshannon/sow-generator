{% extends "base.html" %}
{% block content %}
<h3>Settings</h3>

<h4>Manage Charger Types</h4>
<a href="{{ url_for('add_charger_type') }}" class="btn-success" style="margin-bottom: 10px; display: inline-block;">Add Charger Type</a>
<table class="table">
  <thead>
    <tr>
      <th>ID</th>
      <th>Charger Type</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for charger in charger_types %}
    <tr>
      <td>{{ charger.id }}</td>
      <td>{{ charger.name }}</td>
      <td>
        <form method="POST" action="{{ url_for('delete_charger_type', type_id=charger.id) }}" style="display:inline-block;" onsubmit="return confirm('Are you sure you want to delete this charger type? This cannot be undone if there are no associated SOWs.')">
          <button type="submit" class="btn-danger">Delete</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<h4>Manage Customers</h4>
<a href="{{ url_for('add_customer') }}" class="btn-success" style="margin-bottom: 10px; display: inline-block;">Add New Customer</a>
<table class="table">
  <thead>
    <tr>
      <th>Customer</th>
      <th>Check-in Contact</th>
      <th>Check-out Contact</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for customer in customers %}
    <tr>
      <td>{{ customer.name }}</td>
      <td>{{ customer.check_in_contact or '--' }}</td>
      <td>{{ customer.check_out_contact or '--' }}</td>
      <td>
        <a href="{{ url_for('edit_customer', customer_id=customer.id) }}" class="btn-warning">Edit</a>
        <form method="POST" action="{{ url_for('delete_customer', customer_id=customer.id) }}" style="display:inline-block;" onsubmit="return confirm('Are you sure you want to delete this customer?')">
          <button type="submit" class="btn-danger">Delete</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<p style="margin-top: 20px;"><strong>Note:</strong> Charger types cannot be deleted if they have associated SOWs. Delete the SOWs first, then delete the charger type.</p>
{% endblock %}
